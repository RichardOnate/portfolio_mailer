<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
</p>
---

# üì¨ Portfolio Mailer API

Este proyecto es una REST API desarrollada con **NestJS** y desplegada en **Render** para gestionar el env√≠o de correos desde el formulario de contacto de mi portafolio personal. Al enviar un mensaje, se notifica tanto al usuario como a m√≠, utilizando un template HTML personalizado.

![NestJS](https://img.shields.io/badge/NestJS-E0234E?style=for-the-badge&logo=nestjs&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-%23007ACC?style=for-the-badge&logo=typescript&logoColor=white)
![Nodemailer](https://img.shields.io/badge/Nodemailer-339933?style=for-the-badge&logo=npm&logoColor=white)
![Handlebars](https://img.shields.io/badge/Handlebars.js-000000?style=for-the-badge&logo=handlebarsdotjs&logoColor=white)
![Render](https://img.shields.io/badge/Render-4285F4?style=for-the-badge&logo=render&logoColor=white)
---

## üöÄ Caracter√≠sticas

- ‚öôÔ∏è **NestJS** como framework backend.
- üìß **Nodemailer** para env√≠o de correos.
- üìù **Handlebars** para renderizar plantillas de correo electr√≥nico personalizadas.
- üîê **API Key** para autenticaci√≥n.
- üìä **Swagger** para documentaci√≥n y pruebas del endpoint.
- ‚è±Ô∏è **Throttle** para limitar el n√∫mero de solicitudes.
- üåê **CORS** configurado para permitir solo or√≠genes definidos.
- ‚òÅÔ∏è **Render** para despliegue y hosting de la API.

## üì¶ Instalaci√≥n

1. Clona el repositorio:
   ```bash
   git clone https://github.com/RichardOnate/portfolio_mailer.git
   cd portfolio_mailer
   ```

2. Instala las dependencias:
   ```bash
   npm install
   ```
   
3. Crea un archivo `.env` en la ra√≠z del proyecto con la siguiente configuraci√≥n:

```yaml

#Puerto y entorno
PORT= Puerto por el cual te comunicar√°s con la API (por defecto es el 3000)
NODE_ENV= Entorno de desarrollo o producci√≥n

# Configuraci√≥n Nodemailer
MAIL_HOST= Servidor SMTP que utilizar√°s (Google, Microsoft, etc)
MAIL_PORT= Puerto TCP a utilizar(587, 465, etc)
MAIL_USER= Correo que utilizar√°s para enviar el mail
MAIL_DISPLAY= Correo que utilizar√°s para enviar el mail y que se mostrar√° al receptor
MAIL_PASSWORD= Contrase√±a para usar el correo (de aplicaciones en caso de Google, de acceso en caso de Microsoft, etc)

#API key
API_KEY= Define la API KEY

#Throttle
THROTTLE_TTL= Tiempo que mantendr√°s la solicitud
THROTTLE_LIMIT= L√≠mite de solicitudes

# URLs permitidas para CORS (separadas por comas en producci√≥n)
CLIENT_URL= URL Front

```

4. Ejecuta el proyecto:

   ```bash
   # Modo desarrollo
   npm run start:dev

   # Modo producci√≥n
   npm run start:prod
   ```

---

## üîó Endpoints

Puedes probar el endpoint directamente desde la documentaci√≥n Swagger disponible en:

```
http://localhost:3000/docs
```

### Enviar correo

**POST** `/api/mailing`

- **Authorization**: `Bearer <API_KEY>`
- **Content-Type**: `application/json`

#### Ejemplo de Body

```json
{
  "fullName": "Juan P√©rez",
  "email": "juan@example.com",
  "subject": "Contacto v√≠a formulario", 
  "message": "Hola, me interesa tu trabajo."
}
```

---


## üê≥ Dockerizaci√≥n

Este proyecto est√° preparado para ser desplegado en un contenedor Docker.

### Dockerfile

El `Dockerfile` usa una estrategia de build en m√∫ltiples etapas para optimizar la imagen final.

### Construcci√≥n de la imagen

```bash
docker build -t portfolio-mailer-api .
```

### Ejecuci√≥n del contenedor

```bash
docker run -p 3000:3000 --env-file .env portfolio-mailer-api
```
> NOTA:
> Ten en cuenta los puertos definidos anteriormente.

---

## ‚öôÔ∏è Docker Compose (opcional)

Puedes usar `docker-compose.yml` para levantar el proyecto f√°cilmente:

```yaml
services:
  portfolio-mailer-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: portfolio-mailer-api
    ports:
      - ${PORT:-3000}:${PORT:-3000}
    env_file:
      - .env
    restart: always
```

Para levantar los servicios:

```bash
docker-compose up --build
```

---

## üìÅ Archivos √∫tiles

- `.env` ‚Äì Variables de entorno.
- `.dockerignore` ‚Äì Archivos excluidos del build (sugerencia: incluye `node_modules`, `dist`, etc.).
- `Dockerfile` ‚Äì Instrucciones para construir la imagen.
- `docker-compose.yml` ‚Äì Orquestaci√≥n de contenedores (opcional).

---

## ‚úÖ Notas finales

- Aseg√∫rate de mantener seguras tus credenciales.
- Para producci√≥n, considera usar servicios como el ya mencionado [Render](https://render.com), [Railway](https://railway.app) o [Google Cloud Run](https://cloud.google.com/run).
